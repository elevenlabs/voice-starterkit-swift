name: CI

on:
  workflow_dispatch:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  lint:
    name: Lint
    runs-on: macOS-latest
    steps:
      - uses: actions/checkout@v3

      - name: Install SwiftFormat
        run: brew install swiftformat

      - name: Run SwiftFormat in Strict Mode
        run: swiftformat . --strict

  # build-and-test:
  #   name: Build & Test
  #   strategy:
  #     fail-fast: false
  #     matrix:
  #       include:
  #         # https://github.com/actions/runner-images/blob/main/images/macos/macos-15-Readme.md
  #         - os: macos-15
  #           xcode: 16.4
  #           platform: "iOS Simulator,OS=18.5,name=iPhone 16 Pro"
  #         # - os: macos-15
  #         #   xcode: 16.4
  #         #   platform: "macOS"

  #   runs-on: ${{ matrix.os }}
  #   timeout-minutes: 30
  #   defaults:
  #     run:
  #       shell: bash
  #   steps:
  #     - uses: actions/checkout@v4

  #     - uses: maxim-lobanov/setup-xcode@v1
  #       with:
  #         xcode-version: ${{ matrix.xcode }}

  #     - name: Xcode Version
  #       run: xcodebuild -version

  #     - name: Swift Version
  #       run: xcrun swift --version

  #     - name: Setup .env
  #       run: cat VoiceStarterKit/.env.example.xcconfig > VoiceStarterKit/.env.xcconfig

  #     - name: Run Tests
  #       run: |
  #         set -o pipefail && xcodebuild test \
  #           -scheme VoiceStarterKit \
  #           -destination 'platform=${{ matrix.platform }}' | xcbeautify --renderer github-actions
